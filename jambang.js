function getCartAjax(){$("#cartform").hide(),$("#myCart #exampleModalLabel").text("Gi? hàng"),jQuery.getJSON("/cart.js",(function(t,a){t?($("#cartform").show(),$(".line-item:not(.original)").remove(),$.each(t.items,(function(t,a){var e=a.quantity*a.price;tr=$(".original").clone().removeClass("original").appendTo("table#cart-table tbody"),null!=a.image?tr.find(".item-image").html("<img src="+Haravan.resizeImage(a.image,"small")+">"):tr.find(".item-image").html("<img src='//hstatic.net/0/0/global/noDefaultImage6_large.gif'>"),vt=a.variant_options,-1!=vt.indexOf("Default Title")&&(vt=""),tr.find(".item-title a").html(a.product_title+"<br><span>"+vt+"</span>").attr("href",a.url),tr.find(".item-quantity").html("<input id='quantity1' name='updates[]' min='1' type='number' value="+a.quantity+" class='' />"),"undefined"!=typeof formatMoney?tr.find(".item-price").html(Haravan.formatMoney(e,formatMoney)):tr.find(".item-price").html(Haravan.formatMoney(e,"")),tr.find(".item-delete").html("<a href='#' onclick='deleteCart("+a.variant_id+")' >Xóa</a>")})),"undefined"!=typeof formatMoney?$(".item-total").html(Haravan.formatMoney(t.total_price,formatMoney)):$(".item-total").html(Haravan.formatMoney(t.total_price,"")),$(".modal-title b").html(t.item_count),$("*[id=cart-count]").html(t.item_count),0==t.item_count?($("#myCart #cartform").addClass("hidden"),$("#myCart #exampleModalLabel").html("Gi? hàng c?a b?n dang tr?ng. M?i b?n ti?p t?c mua hàng.")):($("#myCart #exampleModalLabel").html("B?n có "+t.item_count+" s?n ph?m trong gi? hàng."),$("#myCart #cartform").removeClass("hidden"),$("#myCart button").removeAttr("disabled"))):($("#myCart #exampleModalLabel").html("Gi? hàng c?a b?n dang tr?ng. M?i b?n ti?p t?c mua hàng."),$("#cartform").hide())}))}function deleteCart(t){var a={type:"POST",url:"/cart/change.js",data:"quantity=0&id="+t,dataType:"json",success:function(t){getCartAjax()},error:function(t,a){Haravan.onError(t,a)}};jQuery.ajax(a)}jQuery(document).ready((function(){jQuery(".skillbar").each((function(){jQuery(this).find(".skillbar-bar").animate({width:jQuery(this).attr("data-percent")},4e3)})),$(".fancybox_gallery").fancybox({openEffect:"none",closeEffect:"none"})})),$(document).ready((function(){function addItem(t){$.ajax({type:"POST",url:"/cart/add.js",dataType:"json",data:$("#"+t).serialize(),success:Haravan.onSuccess,error:Haravan.onError})}jQuery(window).scroll((function(){$(this).scrollTop()>100?$(".scrollToTop").fadeIn():$(".scrollToTop").fadeOut()})),jQuery(".scrollToTop").click((function(){return $("html, body").animate({scrollTop:0},600),!1})),$(".addtocart").click((function(t){var a=$(this);$(a).prop("disabled",!0),t.preventDefault(),addItem("add-item-form")})),Haravan.onSuccess=function(){var t=$(".addtocart");t.removeAttr("disabled");var a=parseInt(jQuery('[name="quantity"]').val(),10)||1;!function(){$("#cart-animation").show();var e=t.outerWidth()/2,r=t.outerHeight()/2,n=t.offset().left+e,i=$(t).offset().top+r,o=$("#cart-target").outerWidth(),s=($("#cart-target").outerHeight(),{start:{x:n,y:i,angle:190.012,length:.2},end:{x:$("#cart-target").offset().left+o/2-$("#cart-animation").outerWidth()/2-4,y:$("#cart-target").offset().top+o/2-$("#cart-animation").outerHeight()/2-4,angle:90.012,length:.5}});$("#cart-animation").text(a).animate({path:new $.path.bezier(s)},1200,(function(){$("#cart-animation").fadeOut(500,(function(){$(t).prop("disabled",!1);var e=parseInt($("#cart-count").text())+a;$("#cart-count").text(e)}))}))}()},Haravan.onError=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");data.message?alert(data.message+"("+data.status+"): "+data.description):alert("Error : "+Haravan.fullMessagesFromErrors(data).join("; ")+"."),$(".addtocart").removeAttr("disabled")},Haravan.fullMessagesFromErrors=function(t){var a=[];return jQuery.each(t,(function(t,e){jQuery.each(e,(function(e,r){a.push(t+" "+r)}))})),a}})),jQuery(document).ready((function(){$("select.loc_on_change").change((function(){if("#"==$(this).attr("value"))return!1;window.location=$(this).attr("value")}))})),jQuery(document).ready((function(t){t("nav.mobile select").change((function(){window.location=jQuery(this).val()})),t("#product .thumbs a").click((function(){return t("#placeholder").attr("href",t(this).attr("href")),t("#placeholder img").attr("src",t(this).attr("data-original-image")),t("#zoom-image").attr("href",t(this).attr("href")),!1})),t('input[type="submit"], input.btn, button').click((function(){t(this).blur()})),t("li.dropdown").hover((function(){t(this).children(".dropdown").show(),t(this).children(".dropdown").stop(),t(this).children(".dropdown").animate({opacity:1},200)}),(function(){t(this).children(".dropdown").stop(),t(this).children(".dropdown").animate({opacity:0},400,(function(){t(this).hide()}))}))})),function(t){t.path={};var a=function(t,a){var e=a*Math.PI/180,r=Math.cos(e),n=Math.sin(e);return[r*t[0]-n*t[1],n*t[0]+r*t[1]]},e=function(t,a){return[a*t[0],a*t[1]]},r=function(t,a){return[t[0]+a[0],t[1]+a[1]]},n=function(t,a){return[t[0]-a[0],t[1]-a[1]]};t.path.bezier=function(i,o){i.start=t.extend({angle:0,length:.3333},i.start),i.end=t.extend({angle:0,length:.3333},i.end),this.p1=[i.start.x,i.start.y],this.p4=[i.end.x,i.end.y];var s=n(this.p4,this.p1),c=e(s,i.start.length),l=e(s,-1),h=e(l,i.end.length);c=a(c,i.start.angle),this.p2=r(this.p1,c),h=a(h,i.end.angle),this.p3=r(this.p4,h),this.f1=function(t){return t*t*t},this.f2=function(t){return 3*t*t*(1-t)},this.f3=function(t){return 3*t*(1-t)*(1-t)},this.f4=function(t){return(1-t)*(1-t)*(1-t)},this.css=function(t){var a=this.f1(t),e=this.f2(t),r=this.f3(t),n=this.f4(t),i={};return o&&(i.prevX=this.x,i.prevY=this.y),i.x=this.x=this.p1[0]*a+this.p2[0]*e+this.p3[0]*r+this.p4[0]*n+.5|0,i.y=this.y=this.p1[1]*a+this.p2[1]*e+this.p3[1]*r+this.p4[1]*n+.5|0,i.left=i.x+"px",i.top=i.y+"px",i}},t.path.arc=function(t,a){for(var e in t)this[e]=t[e];for(this.dir=this.dir||1;this.start>this.end&&this.dir>0;)this.start-=360;for(;this.start<this.end&&this.dir<0;)this.start+=360;this.css=function(t){var e=(this.start*t+this.end*(1-t))*Math.PI/180,r={};return a&&(r.prevX=this.x,r.prevY=this.y),r.x=this.x=Math.sin(e)*this.radius+this.center[0]+.5|0,r.y=this.y=Math.cos(e)*this.radius+this.center[1]+.5|0,r.left=r.x+"px",r.top=r.y+"px",r}},t.fx.step.path=function(a){var e=a.end.css(1-a.pos);null!=e.prevX&&t.cssHooks.transform.set(a.elem,"rotate("+Math.atan2(e.prevY-e.y,e.prevX-e.x)+")"),a.elem.style.top=e.top,a.elem.style.left=e.left}}(jQuery),$(document).ready((function(){$("#cart-target a").click((function(t){t.preventDefault(),getCartAjax(),$("#myCart").modal("show"),$(".modal-backdrop").css({height:$(document).height(),"z-index":"99"})})),$("a[data-spy=scroll]").click((function(){event.preventDefault(),$("body").animate({scrollTop:$($(this).attr("href")).offset().top-20+"px"},500)})),$("#update-cart-modal").click((function(t){if(t.preventDefault(),!(jQuery("#cartform").serialize().length<=5)){$(this).html("Ðang c?p nh?t");var a={type:"POST",url:"/cart/update.js",data:jQuery("#cartform").serialize(),dataType:"json",success:function(t){"function"==typeof callback?callback(t):getCartAjax(),$("#update-cart-modal").html("C?p nh?t")},error:function(t,a){Haravan.onError(t,a)}};jQuery.ajax(a)}}))})),$("#checkout").click((function(){$("#cartform").submit()})),$((function(){$(window).resize((function(){$("#info").text("Page width: "+$(this).width())})),$(window).trigger("resize")}));